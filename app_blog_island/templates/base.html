{% extends "bootstrap/base.html" %}
{% block head %}
    {{ super() }}
    <title>{% block title %}{% endblock %} - 博客岛</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <style>
        .authform {
            max-width: 300px;
            padding: 19px 29px 29px;
            margin: 0 auto 20px;
            background-color: #F5F5F5;
            border: 2px solid #e5e5e5;
        }
        .authform .checkbox {
            margin-bottom: 10px;
        }
        .authform input[type="text"],
        .authform input[type="password"] {
            font-size: 16px;
            height: auto;
            margin-bottom: 15px;
            padding: 7px 9px;
        }
    </style>
{% endblock %}
{% block content %}
<div>
    <div>
        <a href="{{ url_for('main.index') }}">博客岛</a>
        {% if not current_user.is_authenticated %}
            <a href="{{ url_for('auth.register') }}">注册</a>
            <a href="{{ url_for('auth.login') }}">登录</a>
            <a href="{{ url_for('auth.forget_password_sendemail') }}">忘记密码？</a>
        {% else %}
            <a href="{{ url_for('auth.logout') }}">退出</a>
            <a href="{{ url_for('home.homepage',id=current_user.id) }}">个人主页</a>
            {% if not current_user.banned %}
                <a href="{{ url_for('auth.reset_username') }}">修改用户名</a> 
                <a href="{{ url_for('auth.reset_email') }}">修改邮箱</a> 
                <a href="{{ url_for('auth.reset_password') }}">修改密码</a> 
            {% endif %}
            {% if current_user.verify_permission(Permission.MANAGE_AUTH) %}
                <a href="{{ url_for('manage.user_search') }}">用户管理</a> 
                <a href="{{ url_for('manage.role_choose') }}">角色管理</a> 
            {% endif %}
        {% endif %}
    </div>
    {% for message in get_flashed_messages() %}
    <div class="alert alert-warning">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        {{ message }}
    </div>
    {% endfor %}
    {% block page_content %}{% endblock %}
</div>
{% endblock %}
{% block scripts%}
    {{ super() }}
    {{ moment.include_moment() }}
    {{ moment.lang('zh-CN') }}
{% endblock %}
